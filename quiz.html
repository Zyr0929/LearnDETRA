<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DETRA - ASL Alphabet & Words Quiz</title>
    <style>
        /* Base Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .header {
            background-color: #e0e3e7;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header .logo {
            font-size: 28px;
            font-weight: bold;
            color: #49484d;
            text-decoration: none;
        }

        .header nav a {
            color: #49484d;
            text-decoration: none;
            margin-left: 20px;
            font-size: 16px;
        }

        /* --- Quiz Specific Styles --- */
        .content-section {
            padding: 60px 20px;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .content-section h2 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 40px;
        }

        /* Image Container */
        #image-container {
            width: 100%;
            max-width: 400px;
            height: 400px;
            margin: 0 auto 30px;
            background-color: #ddd;
            border: 3px solid #817c7c;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #sign-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: none;
        }

        /* Options Container */
        #options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 0 auto 25px auto;
            max-width: 600px;
            pointer-events: auto; 
        }

        /* Class to disable pointer events when options are hidden/cleared */
        #options-container.options-inactive {
            pointer-events: none;
            /* Use absolute positioning and off-screen move to guarantee it's out of the way */
            position: absolute; 
            top: -9999px;
            left: -9999px;
        }

        .option-button {
            background-color: #817c7c;
            color: white;
            padding: 15px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            text-align: center;
            font-weight: bold;
            width: 100%; 
        }

        .option-button:hover {
            background-color: #6a6666;
            transform: translateY(-2px);
        }

        /* Feedback Colors */
        .option-button.correct {
            background-color: #2ecc71;
            color: white;
            pointer-events: none;
        }

        .option-button.incorrect {
            background-color: #e74c3c;
            color: white;
            pointer-events: none;
        }

        .option-button:disabled {
            opacity: 0.7;
            cursor: default;
        }

        /* Next, Start, and Reload Buttons (Unified Size/Pos) */
        #next-button, #start-button, #reload-button {
            margin: 15px auto;
            width: 100%;
            max-width: 300px;
            display: block; 
            position: relative; 
            z-index: 10; /* Ensure visibility */
            font-weight: bold;
            border-radius: 8px;
        }
        
        #next-button {
            background-color: #49484d;
            color: white;
            padding: 10px 20px;
            font-size: 1.1em;
            border: none;
        }

        #next-button:hover {
            background-color: #333235;
        }

        /* Dedicated Reload Button Style */
        #reload-button {
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            font-size: 1.1em;
            border: none;
            cursor: pointer;
        }
        
        #reload-button:hover {
            background-color: #1a242c;
        }

        /* Score and Status */
        #score-status {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #49484d;
        }
        
        #statusDiv {
             font-size: 1.1em;
             font-weight: bold;
             margin-bottom: 15px;
             color: #2c3e50;
        }

        /* Footer and Header from template */
        .footer {
            background-color: #e0e3e7;
            color: #49484d;
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            font-size: 0.9em;
        }

        /* Media queries... */
        @media (max-width: 600px) {
            #options-container {
                grid-template-columns: 1fr;
                max-width: 90%;
            }

            #image-container {
                width: 100%;
                height: 300px;
            }
            
            #next-button, #start-button, #reload-button {
                max-width: 90%;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

    <header class="header">
        <a href="https://detrafinal.flutterflow.app/" class="logo">DETRA</a>
        <nav>
            <a href="https://detrafinal.flutterflow.app/">DETRA homepage</a>
            <a href="https://kejds.github.io/DETRA_SIGN/">Sign to Word</a>
            <a href="https://zaewei.github.io/hackathonalphabet.github.io/">Sign to Alphabet</a>
            <a href="https://zaewei.github.io/communitydetrapage/">Community</a>
        </nav>
    </header>

    <div class="content-section">
        <h2>ASL Alphabet & Words Quiz!</h2>

        <div id="quiz-area" style="position: relative;">

            <div id="image-container">
                <img id="sign-image" src="" alt="Sign Language Handshape" style="display:none;">
                <p id="placeholder-text">Click 'Start Quiz' to load the first image.</p>
            </div>

            <p id="score-status">Score: 0/0</p>
            <h3 id="question-text" style="font-size: 1.5em; color: #2c3e50; margin-bottom: 20px;">What does this sign mean?</h3>

            <div id="options-container">
                </div>
            
            <button id="next-button" onclick="loadNextQuestion()">Next Question</button>
            <button id="start-button" class="option-button" onclick="startQuiz()">Start Quiz</button>
            
            <button id="reload-button" style="display: none;" onclick="window.location.reload()">Play Again</button>

        </div>

    </div>

    <footer class="footer">
        <p>&copy; 2025 DETRA. All rights reserved.</p>
        <nav>
            <a href="#">Privacy Policy</a> |
            <a href="#">Terms of Service</a> |
            <a href="#">Contact Us</a>
        </nav>
    </footer>

    <script>
        // --- QUIZ DATA (10 questions per session) ---
        const QUIZ_DATA = {
            "A": "images/a.png",
            "B": "images/b.png",
            "C": "images/c.png",
            "D": "images/d.png",
            "E": "images/e.png",
            "F": "images/f.png",
            "G": "images/g.png",
            "H": "images/h.png",
            "I": "images/i.png",
            "J": "images/j.png",
            "K": "images/k.png",
            "L": "images/l.png",
            "M": "images/m.png",
            "N": "images/n.png",
            "O": "images/o.png",
            "P": "images/p.png",
            "Q": "images/q.png",
            "R": "images/r.png",
            "S": "images/s.png",
            "T": "images/t.png",
            "U": "images/u.png",
            "V": "images/v.png",
            "W": "images/w.png",
            "X": "images/x.png",
            "Y": "images/y.png",
            "Z": "images/z.png",
            "agree": "images/agree.gif",
            "disagree": "images/disagree.gif",
            "hello": "images/hello.gif",
            "thank you": "images/thankyou.gif",
            "i love you": "images/iloveyou.gif"
        };
        
        // --- QUIZ VARIABLES ---
        let currentQuestionIndex = 0;
        let score = 0;
        let quizQuestions = []; 
        const MAX_QUESTIONS_PER_SESSION = 10; 
        const ALL_WORDS = Object.keys(QUIZ_DATA); 

        // --- DOM Elements ---
        const signImage = document.getElementById('sign-image');
        const placeholderText = document.getElementById('placeholder-text');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const startButton = document.getElementById('start-button');
        // Get the new button
        const reloadButton = document.getElementById('reload-button'); 
        const scoreStatus = document.getElementById('score-status');
        const questionText = document.getElementById('question-text');
        
        // Create statusDiv globally
        const statusDiv = document.createElement('p'); 
        statusDiv.id = 'statusDiv';

        // --- HELPER FUNCTIONS ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function capitalizeFirstLetter(string) {
             return string.split(' ').map(word => 
                 word.charAt(0).toUpperCase() + word.slice(1)
             ).join(' ');
        }


        // --- QUIZ LOGIC ---
        
        function initializeQuizDisplay() {
            questionText.textContent = "Press 'Start Quiz' to begin!";
            scoreStatus.textContent = 'Score: 0/0';
            signImage.style.display = 'none';
            placeholderText.style.display = 'block';
            
            // Show original Start button, hide all others
            nextButton.style.display = 'none';
            startButton.style.display = 'block'; 
            reloadButton.style.display = 'none'; // Ensure new button is hidden
            
            startButton.textContent = 'Start Quiz';
            optionsContainer.classList.remove('options-inactive'); 
            optionsContainer.innerHTML = '';
            statusDiv.textContent = 'Click Start Quiz to begin the session!';
        }

        function startQuiz() {
            // 1. Reset quiz state
            shuffleArray(ALL_WORDS);
            quizQuestions = ALL_WORDS.slice(0, MAX_QUESTIONS_PER_SESSION); 
            
            currentQuestionIndex = 0;
            score = 0;
            
            // 2. Control button visibility
            startButton.style.display = 'none';
            nextButton.style.display = 'none'; 
            reloadButton.style.display = 'none'; // Ensure new button is hidden
            
            // Bring options container back into flow
            optionsContainer.classList.remove('options-inactive');
            
            // 3. Load the first question
            loadNextQuestion();
        }

        function loadNextQuestion() {
            if (currentQuestionIndex >= MAX_QUESTIONS_PER_SESSION) {
                endQuiz();
                return;
            }

            const currentWord = quizQuestions[currentQuestionIndex];
            const imageURL = QUIZ_DATA[currentWord];
            
            signImage.src = imageURL;
            signImage.style.display = 'block';
            placeholderText.style.display = 'none';

            const correctOption = currentWord;
            
            const incorrectOptions = ALL_WORDS.filter(word => word !== correctOption);
            shuffleArray(incorrectOptions);
            const selectedIncorrect = incorrectOptions.slice(0, 3);
            
            let options = [correctOption, ...selectedIncorrect];
            shuffleArray(options);

            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('option-button');
                button.textContent = capitalizeFirstLetter(option); 
                button.onclick = () => checkAnswer(button, option, correctOption);
                button.disabled = false;
                optionsContainer.appendChild(button);
            });
            
            updateScoreStatus();
            nextButton.style.display = 'none'; 
            questionText.textContent = `Question ${currentQuestionIndex + 1} of ${MAX_QUESTIONS_PER_SESSION}: What does this sign mean?`;
            statusDiv.textContent = 'Select your answer below.';
        }

        function checkAnswer(selectedButton, selectedAnswer, correctAnswer) {
            const allButtons = document.querySelectorAll('.option-button');
            allButtons.forEach(btn => btn.disabled = true);

            if (selectedAnswer === correctAnswer) {
                selectedButton.classList.add('correct');
                score++;
                statusDiv.textContent = "âœ… Correct!";
            } else {
                selectedButton.classList.add('incorrect');
                allButtons.forEach(btn => {
                    if (btn.textContent.toLowerCase() === capitalizeFirstLetter(correctAnswer).toLowerCase()) {
                        btn.classList.add('correct');
                    }
                });
                statusDiv.textContent = `âŒ Incorrect. The answer was "${capitalizeFirstLetter(correctAnswer)}".`;
            }

            nextButton.style.display = 'block'; 
            
            currentQuestionIndex++;
            updateScoreStatus();
        }

        function updateScoreStatus() {
            const questionsAttempted = currentQuestionIndex; 
            scoreStatus.textContent = `Score: ${score}/${questionsAttempted}`;
        }

        function endQuiz() {
            signImage.style.display = 'none'; 
            placeholderText.style.display = 'block'; 
            optionsContainer.innerHTML = '';
            questionText.textContent = `Quiz Finished!`;
            scoreStatus.textContent = `Final Score: ${score} out of ${MAX_QUESTIONS_PER_SESSION}`;
            
            // Hide all quiz navigation elements
            nextButton.style.display = 'none';
            startButton.style.display = 'none';
            
            // SHOW THE DEDICATED RELOAD BUTTON
            reloadButton.style.display = 'block'; 

            // Physically remove options container footprint
            optionsContainer.classList.add('options-inactive'); 

            let message = "";
            if (score === MAX_QUESTIONS_PER_SESSION) {
                message = "ðŸ”¥ Perfect score! You're an ASL master!";
            } else if (score >= MAX_QUESTIONS_PER_SESSION / 2) {
                message = "ðŸ‘ Well done! Keep practicing to get a perfect score.";
            } else {
                message = "ðŸ“š Good start! Time to review those signs and try again.";
            }
            statusDiv.textContent = message;
        }

        // Initial setup on page load
        document.addEventListener('DOMContentLoaded', () => {
             const quizArea = document.getElementById('quiz-area');
             const nextBtn = document.getElementById('next-button');
             
             // Ensure statusDiv is added to the DOM right before the next button
             if (quizArea && nextBtn) {
                 quizArea.insertBefore(statusDiv, nextBtn); 
             }
             initializeQuizDisplay();
        });

    </script>

</body>

</html>